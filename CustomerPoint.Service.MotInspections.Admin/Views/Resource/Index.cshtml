@model IEnumerable<CustomerPoint.Service.MotInspections.Models.Resource>

@{
    ViewBag.Title = "Resources";
}

<div class="page-header">
    <h1>@ViewBag.Title</h1>
    <p class="lead">Add and update resources</p>
</div>

<table class="table table-gbc table-editor table-hover">
    <thead>
        <tr>
            <th>@Html.DisplayNameFor(model => model.Name)</th>
            <th>@Html.DisplayNameFor(model => model.Start)</th>
            <th>@Html.DisplayNameFor(model => model.End)</th>
            <th>
                @if ((bool)ViewBag.Parent)
            {
                <text>Children</text>
            }
        </th>
        <th></th>
    </tr>
</thead>
<tbody>
    @foreach (var item in Model)
    {
        <tr>
            <td>
                @if (item.Resouces.Count() > 0)
                {
                    @Html.ActionLink(item.Name, "Index", new { parent = item.Id })
                }
                else
                {
                    @Html.DisplayFor(modelItem => item.Name)
                }
            </td>
            <td>@Html.DisplayFor(modelItem => item.Start)</td>
            <td>@Html.DisplayFor(modelItem => item.End)</td>
            <td>
                @if (!item.ParentId.HasValue)
                {
                @item.Resouces.Count()
            }
        </td>
        <td>@Html.ActionLink("Edit", "Edit", new { id = item.Id })</td>
    </tr>
    }
</tbody>
</table>

@section secondary {
    <p class="text-right"><a title="Add new resource" href="@Url.Action("Create")" class="btn btn-default"><span class="glyphicon glyphicon-plus-sign"></span> Add new resource</a></p>
}